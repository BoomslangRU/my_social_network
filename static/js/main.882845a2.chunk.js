(this["webpackJsonpmy-project"]=this["webpackJsonpmy-project"]||[]).push([[0],{107:function(e,t,r){e.exports={modal:"ModalWindowError_modal__1735v",appear:"ModalWindowError_appear__3wL1i",modalDialog:"ModalWindowError_modalDialog__2ZPrJ",animatetop:"ModalWindowError_animatetop__26HaX","slide-in":"ModalWindowError_slide-in__3AiXR",modalHeader:"ModalWindowError_modalHeader__rvoFu"}},111:function(e,t,r){e.exports={header:"Header_header__14Mg1",loginBlock:"Header_loginBlock__SXAi6",activeLink:"Header_activeLink__1KRaB"}},114:function(e,t,r){e.exports={item:"MyPosts_item__3U-2Z"}},115:function(e,t,r){e.exports={preloader:"preloader_preloader__TwXVr",spinner:"preloader_spinner__1qAhX",spin:"preloader_spin__Nbr0G"}},128:function(e,t,r){"use strict";r.d(t,"b",(function(){return o}));var n=r(71),a=r(3),c="SEND_MESSAGE",s={dialogs:[{id:"id1",name:"Alexander"},{id:"id2",name:"Anna"},{id:"id3",name:"Ivan"},{id:"id4",name:"Oleg"},{id:"id5",name:"Dmitriy"},{id:"id6",name:"Ekaterina"}],messages:[{id:1,message:"Hi"},{id:2,message:"How are you"},{id:3,message:"Yo"}]},o=function(e){return{type:c,message:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return Object(a.a)(Object(a.a)({},e),{},{messages:[].concat(Object(n.a)(e.messages),[{id:6,message:t.message}])});default:return e}}},136:function(e,t,r){"use strict";r.d(t,"d",(function(){return v})),r.d(t,"e",(function(){return _})),r.d(t,"c",(function(){return w})),r.d(t,"b",(function(){return k})),r.d(t,"f",(function(){return P}));var n=r(11),a=r.n(n),c=r(18),s=r(71),o=r(3),i=r(21),u=function(e,t,r,n){return e.map((function(e){return e[r]===t?Object(o.a)(Object(o.a)({},e),n):e}))},l="usersPage/FOLLOW",j="usersPage/UNFOLLOW",b="usersPage/SET_USERS",d="usersPage/SET_CURRENT_PAGE",f="usersPage/SET_USERS_COUNT",p="usersPage/TOGGLE_IS_FETCHING",O="usersPage/TOGGLE_IS_FOLLOWING_PROGRESS",h={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},m=function(e){return{type:l,userId:e}},x=function(e){return{type:j,userId:e}},v=function(e){return{type:d,currentPage:e}},g=function(e){return{type:p,isFetching:e}},_=function(e,t){return{type:O,isFetching:e,userId:t}},w=function(e,t){return function(){var r=Object(c.a)(a.a.mark((function r(n){var c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(g(!0)),r.next=3,i.c.getUsers(e,t);case 3:c=r.sent,n(g(!1)),n((s=c.items,{type:b,users:s})),n((a=c.totalCount,{type:f,totalUsersCount:a}));case 7:case"end":return r.stop()}var a,s}),r)})));return function(e){return r.apply(this,arguments)}}()},N=function(){var e=Object(c.a)(a.a.mark((function e(t,r,n,c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(_(!0,r)),e.next=3,n(r);case 3:0===e.sent.resultCode&&t(c(r)),t(_(!1,r));case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),k=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:N(r,e,i.c.followUsers.bind(e),x);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:N(r,e,i.c.unfollowUsers.bind(e),m);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(o.a)(Object(o.a)({},e),{},{users:u(e.users,t.userId,"id",{followed:!0})});case j:return Object(o.a)(Object(o.a)({},e),{},{users:u(e.users,t.userId,"id",{followed:!1})});case b:return Object(o.a)(Object(o.a)({},e),{},{users:t.users});case d:return Object(o.a)(Object(o.a)({},e),{},{currentPage:t.currentPage});case f:return Object(o.a)(Object(o.a)({},e),{},{totalUsersCount:t.totalUsersCount});case p:return Object(o.a)(Object(o.a)({},e),{},{isFetching:t.isFetching});case O:return Object(o.a)(Object(o.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(s.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}}},140:function(e,t,r){e.exports={item:"Post_item__1G2gB"}},141:function(e,t,r){},142:function(e,t,r){e.exports={statusItems:"ProfileStatus_statusItems__1BjuQ"}},156:function(e,t,r){},16:function(e,t,r){e.exports={profileItems:"ProfileInfo_profileItems__3BB7x",item:"ProfileInfo_item__2fw3z",descriptionBlock:"ProfileInfo_descriptionBlock__aDofq",description:"ProfileInfo_description__3LXYB",fullName:"ProfileInfo_fullName__mYfeo",aboutMe:"ProfileInfo_aboutMe__2T4dh",contactsMe:"ProfileInfo_contactsMe__2n9lR",ownerItem:"ProfileInfo_ownerItem__3kWZZ",redTextNoInformation:"ProfileInfo_redTextNoInformation__29N2A",contactName:"ProfileInfo_contactName__2HZQr"}},166:function(e,t,r){},193:function(e,t,r){"use strict";r.r(t);r(156);var n=function(e){e&&e instanceof Function&&r.e(8).then(r.bind(null,217)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))},a=r(43),c=r.n(a),s=r(30),o=r(31),i=r(33),u=r(32),l=r(0),j=r(28),b=r(10),d=r(22),f=r(42),p=(r(166),r(3)),O=r(111),h=r.n(O),m=r.p+"static/media/logoAPP.9b4c435d.png",x=r(1),v=function(e){var t=e.isAuth,r=e.login;return Object(x.jsxs)("header",{className:h.a.header,children:[Object(x.jsx)(d.b,{to:"/main",children:Object(x.jsx)("img",{src:m,alt:"logo"})}),Object(x.jsx)("div",{className:h.a.loginBlock,children:t?Object(x.jsx)(d.b,{to:"/setting",children:r}):Object(x.jsx)(d.b,{to:"/login",children:"Login"})})]})},g=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"render",value:function(){return Object(x.jsx)(v,Object(p.a)({},this.props))}}]),r}(l.Component),_=Object(j.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),null)(g),w=r(65),N=r(44),k=r(19),P=r(36),y=r.n(P),S=function(e){var t=e.authLogin,r=e.isAuth,n=e.captcha,a=Object(l.useState)(null),c=Object(N.a)(a,2),s=c[0],o=c[1];return r?Object(x.jsx)(b.a,{to:"/profile"}):Object(x.jsx)(k.b,{onSubmit:function(e){t(e.login,e.password,e.rememberMe,e.captcha).catch((function(e){o(e)}))},validate:function(e){var t={};return e.login&&(e.login.length<3||e.login.length>20)&&(t.login="login must be from 3 to 20 characters"),e.password&&(e.password.length<4||e.password.length>12)&&(t.password="password must be from 8 to 12 characters"),e.login||(t.login="Required"),e.password||(t.password="Required"),t},render:function(e){var t=e.handleSubmit;return Object(x.jsx)("form",{className:y.a.railway,onSubmit:t,children:Object(x.jsxs)("div",{className:y.a.loginItems,children:[Object(x.jsx)("h2",{children:"Login"}),Object(x.jsx)("div",{className:y.a.formRow,children:Object(x.jsx)(k.a,{name:"login",render:function(e){var t=e.input,r=e.meta;return Object(x.jsxs)("div",{children:[Object(x.jsx)("input",Object(p.a)(Object(p.a)({},t),{},{type:"text",placeholder:"Login"})),r.touched&&(r.error||r.submitError)&&Object(x.jsx)("div",{className:y.a.error,children:r.error||r.submitError})]})}})}),Object(x.jsx)("div",{className:y.a.formRow,children:Object(x.jsx)(k.a,{name:"password",render:function(e){var t=e.input,r=e.meta;return Object(x.jsxs)("div",{children:[Object(x.jsx)("input",Object(p.a)(Object(p.a)({},t),{},{type:"password",placeholder:"Password"})),r.touched&&(r.error||r.submitError)&&Object(x.jsx)("div",{className:y.a.error,children:r.error||r.submitError})]})}})}),Object(x.jsxs)("div",{className:y.a.formRow,children:[Object(x.jsx)(k.a,{name:"rememberMe",component:"input",type:"checkbox"})," ",Object(x.jsx)("p",{children:"remember me"})]}),Object(x.jsx)("div",{className:y.a.errorMessage,children:s}),Object(x.jsx)("div",{className:y.a.formRow,children:n&&Object(x.jsx)(k.a,{name:"captcha",render:function(e){var t=e.input,r=e.meta;return Object(x.jsxs)("div",{children:[Object(x.jsx)("img",{src:n,alt:"captcha"}),Object(x.jsx)("input",Object(p.a)(Object(p.a)({},t),{},{type:"text",placeholder:"Captcha"})),r.touched&&(r.error||r.submitError)&&Object(x.jsx)("div",{className:y.a.error,children:r.error||r.submitError})]})}})}),Object(x.jsx)("div",{className:y.a.formRow,children:Object(x.jsx)("button",{type:"submit",children:"Login"})})]})})}})},E=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"render",value:function(){return Object(x.jsx)(S,Object(p.a)({},this.props))}}]),r}(l.Component),C=Object(j.b)((function(e){return{isAuth:e.auth.isAuth,captcha:e.auth.captchaUrlSuccess}}),{authLogin:w.a})(E),I=r(26),T=r.n(I),L=function(){return Object(x.jsxs)("nav",{className:T.a.nav,children:[Object(x.jsx)("div",{className:T.a.item,children:Object(x.jsx)(d.b,{to:"/profile",activeClassName:T.a.activeLink,children:"Profile"})}),Object(x.jsx)("div",{className:T.a.item,children:Object(x.jsx)(d.b,{to:"/dialogs",activeClassName:T.a.activeLink,children:"Messages"})}),Object(x.jsx)("div",{className:T.a.item,children:Object(x.jsx)(d.b,{to:"/news",activeClassName:T.a.activeLink,children:"News"})}),Object(x.jsx)("div",{className:T.a.item,children:Object(x.jsx)(d.b,{to:"/music",activeClassName:T.a.activeLink,children:"Music"})}),Object(x.jsx)("div",{className:T.a.item,children:Object(x.jsx)(d.b,{to:"/users",activeClassName:T.a.activeLink,children:"Users"})}),Object(x.jsx)("div",{className:T.a.item,children:Object(x.jsx)(d.b,{to:"/setting",activeClassName:T.a.activeLink,children:"Setting"})})]})},A=r(11),M=r.n(A),U=r(18),R=r(71),F=r(21),B="ADD_POST",D="profileReducer/SET_USERS_PROFILE",z="profilePage/SET_TEXT_STATUS",G="profilePage/DELETE_POST",H="profilePage/SET_PHOTO_SUCCESS",W="profilePage/SET_GLOBAL_ERROR",X={posts:[{id:1,message:"Hi, how are you?",likeCounter:12},{id:2,message:"It's my first post",likeCounter:15}],profile:null,usersStatus:"",globalError:null},J=function(e){return{type:z,text:e}},Z=function(e){return{type:W,error:e}},q=function(e){return function(){var t=Object(U.a)(M.a.mark((function t(r){var n;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.a.getProfile(e);case 3:n=t.sent,r({type:D,profile:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),r(Z(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:var r={id:5,message:t.postText,likeCounter:0};return Object(p.a)(Object(p.a)({},e),{},{posts:[].concat(Object(R.a)(e.posts),[r])});case D:return Object(p.a)(Object(p.a)({},e),{},{profile:t.profile});case z:return Object(p.a)(Object(p.a)({},e),{},{usersStatus:t.text});case W:return Object(p.a)(Object(p.a)({},e),{},{globalError:t.error});case H:return Object(p.a)(Object(p.a)({},e),{},{profile:Object(p.a)(Object(p.a)({},e.profile),{},{photos:t.photos.data.photos})});case G:return Object(p.a)(Object(p.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postID}))});default:return e}},Y=r(114),Q=r.n(Y),K=r(140),$=r.n(K),ee=r(81),te=function(e){return Object(x.jsxs)("div",{className:$.a.item,children:[Object(x.jsx)("img",{src:e.profile.photos.small?e.profile.photos.small:ee.a,alt:"avatar for post"}),e.message,Object(x.jsx)("div",{children:Object(x.jsxs)("span",{children:[e.likeCounter," Like"]})})]})},re=r(80),ne=r.n(re),ae=r(48),ce=r.n(ae),se=function(e){var t=e.onAddPost;return Object(x.jsx)(k.b,{onSubmit:function(e){e.newPostText&&(t(e.newPostText),e.newPostText="")},validate:function(e){var t={};return e.newPostText&&e.newPostText.length>100&&(t.newPostText="post must not exceed 100 characters"),t},render:function(e){var t=e.handleSubmit;return Object(x.jsx)("form",{className:ne.a.railway,onSubmit:t,children:Object(x.jsxs)("div",{className:ne.a.textarea,children:[Object(x.jsx)("h3",{children:"My posts"}),Object(x.jsx)("div",{className:ne.a.postBlock,children:Object(x.jsx)(k.a,{name:"newPostText",render:function(e){var t=e.input,r=e.meta;return Object(x.jsxs)("div",{children:[Object(x.jsx)("textarea",Object(p.a)({},t)),r.error&&Object(x.jsx)("div",{className:ne.a.error,children:r.error})]})}})}),Object(x.jsx)("div",{className:ce.a.buttonBlock,children:Object(x.jsx)("button",{type:"submit",children:Object(x.jsx)("span",{children:"Add Post"})})})]})})}})},oe=r(38),ie=Object(l.memo)((function(e){if(!e.profile)return Object(x.jsx)(oe.a,{});var t=e.posts.map((function(t){return Object(x.jsx)(te,Object(p.a)(Object(p.a)({},e),{},{message:t.message,likeCounter:t.likeCounter}),t.id)}));return Object(x.jsxs)("div",{className:Q.a.item,children:[Object(x.jsx)("div",{className:Q.a.postBlock,children:Object(x.jsx)(se,{onAddPost:e.onAddPost})}),t]})})),ue=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"render",value:function(){return Object(x.jsx)(ie,Object(p.a)({},this.props))}}]),r}(l.Component),le=Object(j.b)((function(e){return{profile:e.profilePage.profile,newPostText:e.profilePage.newPostText,posts:e.profilePage.posts,authorizedUserId:e.auth.id,users:e.usersPage.users}}),{onAddPost:function(e){return{type:B,postText:e}}})(ue),je=r(16),be=r.n(je),de=r.p+"static/media/background.51b6c601.jpg",fe=r(141),pe=r.n(fe),Oe=r.p+"static/media/notJob.9e249843.png",he=r.p+"static/media/job.de645b12.png",me=r(142),xe=r.n(me),ve=function(e){var t=Object(l.useState)(!1),r=Object(N.a)(t,2),n=r[0],a=r[1],c=Object(l.useState)(e.usersStatus),s=Object(N.a)(c,2),o=s[0],i=s[1];Object(l.useEffect)((function(){i(e.usersStatus)}),[e.usersStatus]);return Object(x.jsx)("div",{className:xe.a.statusItems,children:n?Object(x.jsx)("div",{children:Object(x.jsx)("input",{onChange:function(e){i(e.currentTarget.value)},autoFocus:!0,onBlur:function(){a(!1),e.updateTextStatus(o)},value:o})}):Object(x.jsx)("div",{children:Object(x.jsxs)("span",{onClick:function(){a(!0)},children:[o||"No Status"," "]})})})},ge=function(e){var t=function(e){var t=e.contactTitle,r=e.contactValue;return Object(x.jsxs)("div",{className:be.a.contactsMe,children:[Object(x.jsxs)("b",{children:[t," :"]}),r?Object(x.jsx)("a",{className:be.a.contactName,href:r,children:r}):Object(x.jsx)("span",{className:be.a.redTextNoInformation,children:"No information"})]})};return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:be.a.description,children:[Object(x.jsxs)("div",{className:be.a.fullName,children:[e.profile.fullName,Object(x.jsx)("img",{src:e.profile.lookingForAJob?Oe:he,alt:"status looking for work",title:e.profile.lookingForAJob?"looking for work":"not looking for work"})]}),Object(x.jsx)(ve,Object(p.a)({},e)),e.profile.aboutMe&&Object(x.jsxs)("div",{className:be.a.aboutMe,children:[Object(x.jsx)("b",{children:"About Me: "}),e.profile.aboutMe]}),e.profile.lookingForAJobDescription&&Object(x.jsxs)("div",{className:be.a.aboutMe,children:[Object(x.jsx)("b",{children:"My professional skills:"})," ",e.profile.lookingForAJobDescription]}),Object(x.jsxs)("div",{className:be.a.aboutMe,children:[Object(x.jsx)("h2",{children:"Contacts: "}),Object.keys(e.profile.contacts).map((function(r){return Object(x.jsx)(t,{contactTitle:r,contactValue:e.profile.contacts[r]},r)}))]})]})})},_e=r(41),we=r.n(_e),Ne=function(e){var t=Object(l.useState)(null),r=Object(N.a)(t,2),n=r[0],a=r[1];return e.profile?Object(x.jsx)(k.b,{onSubmit:function(t){e.saveProfile(t).then((function(){e.exitToEditMode()})).catch((function(e){a(e)}))},initialValues:e.profile,validate:function(t){var r={};return t.fullName||e.profile.fullName||(r.fullName="Required"),t.fullName&&t.fullName.length>20&&(r.fullName="Nickname must not exceed 10 characters"),r},render:function(t){var r=t.handleSubmit;return Object(x.jsx)("form",{className:be.a.railway,onSubmit:r,children:Object(x.jsxs)("div",{className:we.a.description,children:[Object(x.jsx)("div",{className:we.a.formRow,children:Object(x.jsx)(k.a,{name:"fullName",render:function(e){var t=e.input,r=e.meta;return Object(x.jsxs)("div",{children:[Object(x.jsx)("b",{children:"Your Nickname?"}),Object(x.jsx)("input",Object(p.a)(Object(p.a)({},t),{},{type:"text"})),r.touched&&(r.error||r.submitError)&&Object(x.jsx)("div",{className:we.a.error,children:r.error||r.submitError})]})}})}),Object(x.jsxs)("div",{className:we.a.checkbox,children:[Object(x.jsx)("b",{children:"Looking for a job?"}),Object(x.jsx)(k.a,{name:"lookingForAJob",component:"input",type:"checkbox"})]}),Object(x.jsx)("div",{className:we.a.formRow,children:Object(x.jsx)(k.a,{name:"aboutMe",render:function(e){var t=e.input,r=e.meta;return Object(x.jsxs)("div",{children:[Object(x.jsx)("b",{children:"About Me: "})," ",Object(x.jsx)("input",Object(p.a)(Object(p.a)({},t),{},{type:"text"})),r.touched&&(r.error||r.submitError)&&Object(x.jsx)("div",{className:be.a.error,children:r.error||r.submitError})]})}})}),Object(x.jsx)("div",{className:we.a.formRow,children:Object(x.jsx)(k.a,{name:"lookingForAJobDescription",render:function(e){var t=e.input,r=e.meta;return Object(x.jsxs)("div",{children:[Object(x.jsx)("b",{children:"My professional skills:"})," ",Object(x.jsx)("input",Object(p.a)(Object(p.a)({},t),{},{type:"text"})),r.touched&&(r.error||r.submitError)&&Object(x.jsx)("div",{className:be.a.error,children:r.error||r.submitError})]})}})}),Object(x.jsxs)("div",{className:we.a.formRow,children:[Object(x.jsx)("h2",{children:"Contacts: "})," ",Object.keys(e.profile.contacts).map((function(e){return Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:we.a.formRow,children:Object(x.jsx)(k.a,{name:"contacts."+e,render:function(t){var r=t.input,n=t.meta;return Object(x.jsxs)("div",{children:[Object(x.jsxs)("b",{children:[e,":"]})," ",Object(x.jsx)("input",Object(p.a)(Object(p.a)({},r),{},{type:"text"})),n.touched&&(n.error||n.submitError)&&Object(x.jsx)("div",{className:be.a.error,children:n.error||n.submitError})]})}})})},e)}))]}),Object(x.jsx)("div",{className:we.a.errorMessage,children:n}),Object(x.jsx)("div",{className:ce.a.buttonBlock,children:Object(x.jsx)("button",{type:"saveProfile",children:"save profile"})})]})})}}):Object(x.jsx)(oe.a,{})},ke=function(e){var t=Object(l.useState)(!1),r=Object(N.a)(t,2),n=r[0],a=r[1];return e.profile?Object(x.jsxs)("div",{className:be.a.profileItems,children:[Object(x.jsx)("div",{className:be.a.item,children:Object(x.jsx)("img",{src:de,alt:"background"})}),Object(x.jsxs)("div",{className:be.a.descriptionBlock,children:[Object(x.jsx)("img",{src:e.profile.photos.large?e.profile.photos.large:ee.a,alt:"user photos"}),Object(x.jsx)("div",{className:be.a.ownerItem,children:!e.isOwner&&Object(x.jsx)("input",{className:pe.a,type:"file",onChange:function(t){t.target.files.length&&e.savePhoto(t.target.files[0])}})}),Object(x.jsx)("div",{className:ce.a.buttonBlock,children:!e.isOwner&&Object(x.jsx)("button",{onClick:function(){a(!0)},children:Object(x.jsx)("span",{children:"edit profile"})})})]}),Object(x.jsx)("div",{children:n?Object(x.jsx)(Ne,Object(p.a)(Object(p.a)({},e),{},{exitToEditMode:function(){a(!1)}})):Object(x.jsx)(ge,Object(p.a)({},e))})]}):Object(x.jsx)(oe.a,{})},Pe=function(e){return Object(x.jsxs)("main",{children:[Object(x.jsx)(ke,Object(p.a)({},e)),Object(x.jsx)(le,{})]})},ye=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getProfile(e),this.props.getTextStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(x.jsx)(Pe,Object(p.a)(Object(p.a)({},this.props),{},{isOwner:this.props.match.params.userId}))}}]),r}(l.Component),Se=Object(f.c)(b.g,Object(j.b)((function(e){return{profile:e.profilePage.profile,usersStatus:e.profilePage.usersStatus,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth}}),{getProfile:q,getTextStatus:function(e){return function(){var t=Object(U.a)(M.a.mark((function t(r){var n;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.a.getUserStatus(e);case 3:n=t.sent,r(J(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),r(Z(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},updateTextStatus:function(e){return function(){var t=Object(U.a)(M.a.mark((function t(r){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.a.updateUserStatus(e);case 3:0===t.sent.resultCode&&r(J(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),r(Z(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(U.a)(M.a.mark((function t(r){var n;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.a.savePhoto(e);case 3:0===(n=t.sent).resultCode&&r({type:H,photos:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),r(Z(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(U.a)(M.a.mark((function t(r,n){var a,c;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=n().auth.id,t.next=4,F.a.saveProfile(e);case 4:if(0!==(c=t.sent).resultCode){t.next=9;break}r(q(a)),t.next=10;break;case 9:return t.abrupt("return",Promise.reject(c.messages[0]));case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),r(Z(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r){return t.apply(this,arguments)}}()}}))(ye),Ee="app/INITIALIZED_SUCCESS",Ce={initialize:!1},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return Object(p.a)(Object(p.a)({},e),{},{initialize:!0});default:return e}},Te=r(128),Le=r(136),Ae=r(143),Me=Object(f.b)({app:Ie,profilePage:V,dialogsPage:Te.a,usersPage:Le.a,auth:w.b}),Ue=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.c,Re=Object(f.d)(Me,Ue(Object(f.a)(Ae.a)));window.__store__=Re;var Fe=Re,Be=function(e){return function(t){return Object(x.jsx)(l.Suspense,{fallback:Object(x.jsx)(oe.a,{}),children:Object(x.jsx)(e,Object(p.a)({},t))})}},De=r.p+"static/media/404.2b91083a.gif",ze=r(206),Ge=r(209),He=r(207),We=r(75),Xe=r(107),Je=r.n(Xe),Ze=function(e){var t=e.globalError,r=e.setGlobalError;return Object(x.jsx)(ze.a,{className:Je.a.modal,open:!!t,onClose:function(){t=null},basic:!0,size:"small",children:Object(x.jsxs)("div",{className:Je.a.modalDialog,children:[Object(x.jsx)(Ge.a,{className:Je.a.modalHeader,icon:"browser",content:"window error"}),Object(x.jsx)(ze.a.Content,{children:Object(x.jsx)("h3",{children:t})}),Object(x.jsx)(ze.a.Actions,{className:ce.a.buttonBlock,children:Object(x.jsxs)(He.a,{onClick:function(){return r(null)},inverted:!0,children:[Object(x.jsx)(We.a,{name:"check"})," Exit window"]})})]})})},qe=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"render",value:function(){return Object(x.jsx)(Ze,Object(p.a)({},this.props))}}]),r}(l.Component),Ve=Object(j.b)((function(e){return{globalError:e.profilePage.globalError}}),{setGlobalError:Z})(qe),Ye=Object(l.lazy)((function(){return r.e(3).then(r.bind(null,220))})),Qe=Object(l.lazy)((function(){return r.e(6).then(r.bind(null,218))})),Ke=Object(l.lazy)((function(){return r.e(5).then(r.bind(null,222))})),$e=Object(l.lazy)((function(){return r.e(7).then(r.bind(null,219))})),et=Object(l.lazy)((function(){return r.e(4).then(r.bind(null,221))})),tt=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"componentDidMount",value:function(){this.props.initializeAPP()}},{key:"render",value:function(){return this.props.initialize?Object(x.jsxs)("div",{className:"app-wrapper",children:[Object(x.jsx)(_,{}),Object(x.jsx)(L,{}),Object(x.jsx)(Ve,{}),Object(x.jsx)("div",{className:"app-wrapper-content",children:Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.a,{exact:!0,from:"/",to:"/profile"}),Object(x.jsx)(b.b,{path:"/login",render:function(){return Object(x.jsx)(C,{})}}),Object(x.jsx)(b.b,{path:"/profile/:userId?",render:function(){return Object(x.jsx)(Se,{})}}),Object(x.jsx)(b.b,{path:"/dialogs",render:Be(Ye)}),Object(x.jsx)(b.b,{path:"/News",render:Be($e)}),Object(x.jsx)(b.b,{path:"/music",render:Be(Qe)}),Object(x.jsx)(b.b,{path:"/users",render:Be(et)}),Object(x.jsx)(b.b,{path:"/setting",render:Be(Ke)}),Object(x.jsx)(b.b,{path:"*",render:function(){return Object(x.jsxs)("div",{children:[" ",Object(x.jsx)("img",{src:De,alt:"not found"})," "]})}})]})})]}):Object(x.jsx)(oe.a,{})}}]),r}(l.Component),rt=Object(f.c)(b.g,Object(j.b)((function(e){return{initialize:e.app.initialize}}),{initializeAPP:function(){return function(){var e=Object(U.a)(M.a.mark((function e(t){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t(Object(w.c)()),e.next=3,Promise.all([r]).then((function(){t({type:Ee})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(tt),nt=function(){return Object(x.jsx)(d.a,{children:Object(x.jsx)(j.a,{store:Fe,children:Object(x.jsx)(rt,{})})})};c.a.render(Object(x.jsx)(nt,{}),document.getElementById("root")),n()},21:function(e,t,r){"use strict";r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return o}));var n=r(139),a=n.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"be226811-1c2d-4462-a825-3b4251ba6858"}}),c={getUsers:function(e,t){return a.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},followUsers:function(e){return a.delete("follow/".concat(e)).then((function(e){return e.data}))},unfollowUsers:function(e){return a.post("follow/".concat(e),{}).then((function(e){return e.data}))},getProfile:function(e){return a.get("profile/".concat(e)).then((function(e){return e.data}))}},s={getProfile:function(e){return a.get("profile/".concat(e)).then((function(e){return e.data}))},getUserStatus:function(e){return a.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateUserStatus:function(e){return a.put("profile/status",{status:e}).then((function(e){return e.data}))},savePhoto:function(e){var t=new FormData;return t.append("image",e),a.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},saveProfile:function(e){return a.put("profile",e).then((function(e){return e.data}))}},o={me:function(){return a.get("auth/me").then((function(e){return e.data}))},login:function(e,t,r,n){return a.post("auth/login",{email:e,password:t,rememberMe:r,captcha:n}).then((function(e){return e.data}))},logout:function(){return a.delete("auth/login").then((function(e){return e.data}))},getCaptchaUrl:function(){return a.get("security/get-captcha-url").then((function(e){return e.data}))}}},26:function(e,t,r){e.exports={nav:"Nav_nav__1b8zf",item:"Nav_item__2Juri",activeLink:"Nav_activeLink__1GgLb"}},36:function(e,t,r){e.exports={railway:"Login_railway__NUuiF",formRow:"Login_formRow__3EO5B","form-row":"Login_form-row__136pk","ui-form":"Login_ui-form__1QQl5",error:"Login_error__1G0CB",errorMessage:"Login_errorMessage__3kHnN"}},38:function(e,t,r){"use strict";var n=r(115),a=r.n(n),c=r(1);t.a=function(){return Object(c.jsx)("div",{className:a.a.preloader,children:Object(c.jsx)("div",{className:a.a.spinner})})}},41:function(e,t,r){e.exports={formRow:"ProfileDataForm_formRow__Zv9bE",description:"ProfileDataForm_description__3TRoi",error:"ProfileDataForm_error__2NWj3",checkbox:"ProfileDataForm_checkbox__3CElC",styleButton:"ProfileDataForm_styleButton__2XPvG",errorMessage:"ProfileDataForm_errorMessage__22XST"}},48:function(e,t,r){e.exports={buttonBlock:"styleButton_buttonBlock__3mT6X"}},65:function(e,t,r){"use strict";r.d(t,"c",(function(){return d})),r.d(t,"a",(function(){return f})),r.d(t,"d",(function(){return p}));var n=r(11),a=r.n(n),c=r(18),s=r(3),o=r(21),i="auth/SET_USER_DATA",u="auth/GET_CAPTCHA_URL",l={id:null,login:null,email:null,isAuth:!1,captchaUrlSuccess:null},j=function(e,t,r,n){return{type:i,data:{id:e,login:t,email:r,isAuth:n}}},b=function(e){return{type:u,captchaUrl:e}},d=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var r,n,c,s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.me();case 2:0===(r=e.sent).resultCode&&(n=r.data,c=n.id,s=n.login,i=n.email,t(j(c,s,i,!0)),t(b(null)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function(e,t,r,n){return function(){var s=Object(c.a)(a.a.mark((function c(s){var i;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.b.login(e,t,r,n);case 2:if(0!==(i=a.sent).resultCode){a.next=7;break}s(d()),a.next=12;break;case 7:if(10!==i.resultCode){a.next=11;break}s(O()),a.next=12;break;case 11:return a.abrupt("return",Promise.reject(i.messages[0]));case 12:case"end":return a.stop()}}),c)})));return function(e){return s.apply(this,arguments)}}()},p=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.logout();case 2:0===e.sent.resultCode&&t(j(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.getCaptchaUrl();case 2:r=e.sent,t(b(r.url));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return Object(s.a)(Object(s.a)({},e),t.data);case u:return Object(s.a)(Object(s.a)({},e),{},{captchaUrlSuccess:t.captchaUrl});default:return e}}},80:function(e,t,r){e.exports={postBlock:"PostForm_postBlock__f-alt",error:"PostForm_error__gsWWp"}},81:function(e,t,r){"use strict";t.a=r.p+"static/media/users.d2cb85e1.png"}},[[193,1,2]]]);
//# sourceMappingURL=main.882845a2.chunk.js.map